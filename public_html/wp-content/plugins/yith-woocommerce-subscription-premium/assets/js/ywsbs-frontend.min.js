jQuery(function(e){"use strict";var t=e("body"),r={message:null,overlayCSS:{background:"#fff",opacity:.7},ignoreIfBlocked:!0};e.fn.yith_ywsbs_variations=function(){var t=e(".variations_form"),o=t.find(".single_add_to_cart_button");t.on("found_variation",function(t,s){1==s.is_subscription?o.text(yith_ywsbs_frontend.add_to_cart_label):o.text(yith_ywsbs_frontend.default_cart_label)})},t.hasClass("single-product")&&e.fn.yith_ywsbs_variations(),e(document).on("click",".ywsbs-open-modal",function(t){t.stopPropagation();try{var s,o,n=e(document).find(".ywsbs-modal");n.length&&(s=wp.template("ywsbs-"+e(this).data("target")),o=e(this).data("content")||{},n.find(".ywsbs-modal-body").html(s(o)),n.fadeIn("slow"),e(document).trigger("ywsbs-subscription-modal-shown",[n]))}catch(a){console.error(a)}}),e(document).on("click",".ywsbs-modal .close",function(t){t.stopPropagation();var s=e(document).find(".ywsbs-modal");s.fadeOut("slow",function(){s.find(".ywsbs-modal-body").html(""),e(document).trigger("ywsbs-subscription-modal-closed",[s])})}),e(document).on("click",".ywsbs-action-button",function(t){t.preventDefault();var s=e(this),o=s.closest(".ywsbs-action-button-wrap"),t=s.closest(".ywsbs-modal-body"),n=t.find(".ywsbs-content-text"),a=t.find(".close-modal-wrap"),t=s.data("action"),i=s.data("id"),c=s.data("nonce");o.block(r),e.ajax({url:yith_ywsbs_frontend.ajaxurl,data:{subscription_id:i,action:"ywsbs_"+t+"_subscription",change_status:t,security:c,context:"frontend"},type:"POST",success:function(t){t.success&&n.html(t.success),t.error&&n.html('<span class="error">'+t.error+"</span>"),s.fadeOut(),a.fadeOut(),setTimeout(function(){e(".ywsbs-modal .close").trigger("click"),e.post(document.location.href,function(t){""!=t&&(t=e("<div></div>").html(t).find(".ywsbs-subscription-view-wrap"),e(".ywsbs-subscription-view-wrap").html(t.html()))})},2500)},complete:function(){o.unblock()}})})});